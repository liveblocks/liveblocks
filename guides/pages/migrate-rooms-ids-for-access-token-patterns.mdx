---
meta:
  title: "How to migrate your existing rooms IDs to use access token patterns"
  description:
    "Learn how to migrate your current rooms IDs to match access token patterns."
---

## How to handle active users connected to a room while its ID is updated

To ensure a seamless experience for users actively connected to a room when its
ID changes, we issue a custom error indicating that the room ID has been
updated, which includes the new ID. You can leverage this new ID to redirect
users to the correct document. Upon updating the room ID, Liveblocks will
disconnect active users and issue this custom error code.

```ts
useErrorListener((error) => {
  console.log("Error", error.message);
  switch (error.code) {
    case -1: // Authentication error break;

    case 4001:
      // Could not connect because you don't have access to this room
      break;

    case 4005:
      // Could not connect because room was full
      break;

    case 4006:
      // Could not connect because roomId was updated
      console.log("roomId updated to:", error.message);
      const newRoomId = error.message;
      // TODO: implement redirect
      break;

    default:
      // Unexpected error
      break;
  }
});
```

## Use Liveblocks REST API to update your rooms IDs

Use the
[update room id](/docs/api-reference/rest-api-endpoints#post-rooms-update-roomId)
endpoint to update a room id.
