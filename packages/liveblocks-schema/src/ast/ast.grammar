#
# Below you'll find the full AST specification. This is a simplistic
# specification format (a DSL) for specifying which AST node hierarchies are
# valid.
#
# This is used to generate the AST TypeScript module.
#

@BuiltInScalarType:
    | StringKeyword
    | IntKeyword
    | FloatKeyword


@Comment:
    # | BlockComment
    | LineComment


# A custom user-defined type definition
@Definition:
    | ObjectTypeDef


# @Literal:
#     # | FloatLiteral
#     # | IntLiteral
#     | StringLiteral


@LiveTypeExpr:
    # | LiveListTypeExpr
    # | LiveMapTypeExpr
    | LiveObjectTypeExpr


@TypeExpr:
    # | @Literal
    | @BuiltInScalarType
    | @LiveTypeExpr
    | ObjectLiteralExpr
    | TypeRef


# Reference to a custom, user-defined, type. Not a built-in, not
# a "LiveObject". Things like "Circle", "BlogPost", etc.
TypeRef:
    name  Identifier


Document:
    definitions  @Definition+
    comments     @Comment*?


FieldDef:
    name      Identifier
    optional  boolean
    type      @TypeExpr


Identifier:
    name  string


LineComment:
    text  string


# e.g. "LiveObject<Shape>"
LiveObjectTypeExpr:
    of  TypeRef


# e.g. { cx: Number; cy: Number; r: Float }
ObjectLiteralExpr:
    fields  FieldDef*


# e.g. type Circle { cx: Number; cy: Number; r: Float }
ObjectTypeDef:
    name  Identifier
    obj   ObjectLiteralExpr


# StringLiteral:
#     value     string
#     rawValue  string


StringKeyword:
    dummy_  string?


IntKeyword:
    dummy_  string?


FloatKeyword:
    dummy_  string?
