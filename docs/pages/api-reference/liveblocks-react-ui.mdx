---
meta:
  title: "@liveblocks/react-ui"
  parentTitle: "API Reference"
  description: "API Reference for the @liveblocks/react-ui package"
alwaysShowAllNavigationLevels: false
---

`@liveblocks/react-ui` provides you with [React](https://react.dev/) components
to build collaborative experiences. Read our
[Comments](/docs/get-started/comments) and
[Notifications](/docs/get-started/notifications) get started guides to learn
more.

## AI Copilots

### Default components [#AI-Copilots-Components]

#### AiChat

Displays an interactive AI chat. AI can
[use knowledge](/docs/api-reference/liveblocks-react#RegisterAiKnowledge) and
[run actions or display content via tools](/docs/api-reference/liveblocks-react#RegisterAiTool).

```tsx
<AiChat chatId="my-chat-id" />
```

<Figure>
  <Image
    src="/assets/ai-copilots/ai-chat.jpg"
    alt="AI Chat"
    width={768}
    height={446}
    style={{ borderRadius: 12 }}
  />
</Figure>

Each chat is stored permanently, and is identified by its unique `chatId`. Chats
are only visible to the [authenticated user](/docs/authentication) who created
the chat.

```tsx
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return <AiChat chatId="my-chat-id" />;
}
```

##### Assigning a copilot [#AiChat-copilot]

Use a custom copilot in your chat. You can define copilots with custom prompts &
settings in the [Liveblocks dashboard](/dashboard), passing your API key from
OpenAI, Anthropic, or Google. Copy the copilot's ID and pass it to the
`copilotId` prop.

```tsx
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      copilotId="co_a7Gd3x..."
      // +++
    />
  );
}
```

Dynamically switching copilots is possible, and messages will use whichever
`copilotId` is set when a message is sent.

##### Show placeholder content in new chats [#AiChat-placeholder]

In chats without messages, you can display placeholder content to welcome and
guide the user. To set this content, use the `Empty` property under
`components`.

```tsx
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      components={{ Empty: <div>I'm an empty chat!</div> }}
      // +++
    />
  );
}
```

Additionally, you can add suggestion buttons which will automatically submit new
messages to the chat when clicked. Create them with
[`useSendAiMessage`](/docs/api-reference/liveblocks-react#useSendAiMessage).

```tsx
import { useSendAiMessage } from "@liveblocks/react";
import { AiChat } from "@liveblocks/react-ui";

function Chat({ chatId }: { chatId: string }) {
  // +++
  const sendAiMessage = useSendAiMessage(chatId);
  // +++

  return (
    <AiChat
      chatId="my-chat-id"
      components={{
        Empty: (
          <div>
            <div>Suggestions</div>
            // +++
            <button onClick={() => sendAiMessage("What's new?")}>
              Update me
            </button>
            <button onClick={() => sendAiMessage("Create a new document")}>
              Draft a document
            </button>
            // +++
          </div>
        ),
      }}
    />
  );
}
```

##### List the user‚Äôs chats and switch between them [#AiChat-chat-listing]

You can display a list of all chats created by the current user with
[`useAiChats`](/docs/api-reference/liveblocks-react#useAiChats). For example,
you can render a list of buttons that allow you to switch between chats. In each
button, you can display the chat‚Äôs automatically generated title, as seen below.
Chats can be deleted with
[`useDeleteAiChat`](/docs/api-reference/liveblocks-react#useDeleteAiChat).

```tsx
import { useState } from "react";
import { AiChat } from "@liveblocks/react-ui";
import { useAiChats } from "@liveblocks/react";
import { Timestamp } from "@liveblocks/react-ui/primitives";

function Chats() {
  // +++
  const { chats, error, isLoading } = useAiChats();
  const [chatId, setChatId] = useState();
  const deleteChat = useDeleteAiChat();
  // +++

  if (isLoading) {
    return <div>Loading...</div>;
  }

  if (error) {
    return <div>Error: {error.message}</div>;
  }

  return (
    <div style={{ display: "flex" }}>
      <ul>
        // +++
        {chats.map((chat) => (
          <li key={chat.id}>
            <button onClick={() => setChatId(chat.id)}>
              {chat.title || "Untitled"}
            </button>
            <Timestamp date={chat.lastMessageAt || chat.createdAt} />
            <button onClick={() => deleteChat(chat.id)}>‚ùå</button>
          </li>
        ))}
        // +++
      </ul>
      // +++
      <AiChat chatId={chatId} />
      // +++
    </div>
  );
}
```

##### Display the chat‚Äôs title [#AiChat-title]

Each chat has a `title` property, automatically generated by AI. The title of a
new chat starts empty, and is updated after AI receives the first message and
writes a response. You can render this alongside your chat with
[`useAiChat`](/docs/api-reference/liveblocks-react#useAiChat).

```tsx
import { AiChat } from "@liveblocks/react-ui";
import { useAiChat } from "@liveblocks/react";

function ChatWithTitle({ chatId }: { chatId: string }) {
  // +++
  const { chat, error, isLoading } = useAiChat();
  // +++

  if (isLoading) {
    return <div>Loading...</div>;
  }

  if (error) {
    return <div>Error: {error.message}</div>;
  }

  return (
    <div>
      // +++
      <h1>{chat.title || "Untitled chat"}</h1>
      // +++
      <AiChat chatId={chatId} />
    </div>
  );
}
```

##### Add front-end knowledge [#AiChat-front-end-knowledge]

You can add front-end knowledge to chats, meaning the AI will understand the
information you pass, and will answer questions or call tools based on it. This
is particularly helpful for passing user info, app state, and small contextual
knowledge.

It‚Äôs generally recommended to use
[`RegisterAiKnowledge`](/docs/api-reference/liveblocks-react#RegisterAiKnowledge)
for adding knowledge, as this will add knowledge to all AI features on the page.
However, if you‚Äôd like knowledge that is specific to one chat, you can add it
with the `knowledge` prop on `AiChat`. No other chats will have access to this
knowledge.

```tsx
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      knowledge={[
        { description: "The current user's payment plan", value: "Enterprise" },
        {
          description: "The current user's info",
          value: {
            name: "Jody Hekla",
            email: "jody@liveblocks.io",
            teams: ["Engineering", "Product"],
          },
        },
      ]}
      // +++
    />
  );
}
```

##### Add back-end knowledge [#AiChat-back-end-knowledge]

You can add back-end knowledge to chats, meaning the AI will understand the
information you pass, and can answer questions or call tools based on it. This
is a way to pass large amounts of project-wide information, for example complex
documentation.

{/* TODO screenshot */}

When creating or editing a copilot in the [Liveblocks dashboard](/dashboard)
navigate to the Knowledge tab. Within here you can upload any relevant files, or
submit websites for indexing. Your copilot will internalize this knowledge using
retrieval-augmented generation (RAG).

##### Adjusting the chat‚Äôs width [#AiChat-width]

When using the default `inset` layout, it‚Äôs possible to adjust the chat‚Äôs width
by setting the `--lb-ai-chat-container-width` CSS variable. This allows the
chat‚Äôs scroll window to stay full width, whilst keeping the composer and
messages centered in the middle.

```css
.lb-ai-chat {
  --lb-ai-chat-container-width: 600px;
}
```

```tsx title="Set variable in React" isCollapsable isCollapsed
import { CSSProperties } from "react";
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      style={{ "--lb-ai-chat-container-width": 600 } as CSSProperties}
      // +++
    />
  );
}
```

```tsx title="Set variable in Tailwind CSS" isCollapsable isCollapsed
import { CSSProperties } from "react";
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      className="[--lb-ai-chat-container-width:600px]"
      // +++
    />
  );
}
```

##### Compact layout mode [#AiChat-compact-layout]

An alternate `compact` layout mode is available, ideal for smaller UI components
such as pop-up windows. Compact layout mode removes the shadow and padding on
the composer, makes it full-width, and displays a border above it.

```tsx
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      layout="compact"
      // +++
    />
  );
}
```

##### Change background color [#AiChat-background]

You can change the background color of the chat by setting the `--lb-background`
CSS variable on `.lb-ai-chat`.

```css
.lb-ai-chat {
  --lb-background: #eeeeee;
}
```

```tsx title="Set variable in React" isCollapsable isCollapsed
import { CSSProperties } from "react";
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      style={{ "--lb-background": "#EEEEEE" } as CSSProperties}
      // +++
    />
  );
}
```

```tsx title="Set variable in Tailwind CSS" isCollapsable isCollapsed
import { CSSProperties } from "react";
import { AiChat } from "@liveblocks/react-ui";

function Chat() {
  return (
    <AiChat
      chatId="my-chat-id"
      // +++
      className="[--lb-background:#EEEEEE]"
      // +++
    />
  );
}
```

##### Customize CSS variables and classes [#AiChat-variables-and-classes]

You can customize the default styles of the chat by modifying CSS variables and
classes prefixed with `lb`. Here are some examples.

```css
/* Lowers spacing and shrinks font size */
.lb-ai-chat {
  --lb-spacing: 0.6em;
  font-size: 14px;
}

/* Removes composer shadow and adds border */
.lb-ai-chat-composer {
  box-shadow: 0;
  border: 1px solid #f0f0f0;
}

/* Removes padding below the composer */
.lb-ai-chat-footer {
  padding-bottom: 0;
}
```

##### Customize how Markdown is rendered [#AiChat-markdown]

You can customize how Markdown is rendered in messages by passing components to
the `components` prop. A full list is [available here](#AiChat-components).

```tsx
<AiChat
  chatId="my-chat-id"
  components={{
    // +++
    markdown: {
      // Example: Use custom paragraph styles
      Paragraph: ({ children }) => <p className="my-3">{children}</p>,

      // Example: Use an existing component for quotes
      Blockquote: ({ children }) => <MyQuote>{children}</MyQuote>,

      // Example: Use `next/link` instead of default `<a>` tag
      Link: ({ children, href }) => <Link href={href || ""}>{children}</Link>,

      // Example: Use an external library to add syntax highlighting to code blocks
      CodeBlock: ({ language, code }) => (
        <SyntaxHighlighter language={language}>{code}</SyntaxHighlighter>
      ),

      // `Heading`, `Inline`, `List`, `Table`, `Image`, `Separator`, etc.
      // ...
    },
    // +++
  }}
/>
```

##### Props [#AiChat-props]

<PropertiesList>
  <PropertiesListItem name="chatId" type="string" isRequired>
    The unique identifier for the chat. Each chat is stored permanently and is
    only visible to the authenticated user who created it.
  </PropertiesListItem>
  <PropertiesListItem name="autoFocus" type="boolean">
    Whether to automatically focus the composer input when the chat loads.
    Defaults to `false`.
  </PropertiesListItem>
  <PropertiesListItem name="copilotId" type="string">
    The ID of the custom copilot to use for this chat. Copy this from your
    copilot configuration in the [Liveblocks
    dashboard](https://liveblocks.io/dashboard/copilots).
  </PropertiesListItem>
  <PropertiesListItem name="knowledge" type="AiKnowledgeSource[]">
    Array of knowledge sources specific to this chat. This knowledge will only
    be available to this chat instance and not to other AI features on the page.
  </PropertiesListItem>
  <PropertiesListItem name="tools" type="Record<string, AiToolDefinition>">
    Object mapping tool names to tool definitions that should be available in
    this chat.
  </PropertiesListItem>
  <PropertiesListItem
    name="onComposerSubmit"
    type="function"
    detailedType="(comment: AiComposerSubmitMessage, event: FormEvent<HTMLFormElement>) => Promise<void> | void"
  >
    The event handler called when the composer is submitted.
  </PropertiesListItem>
  <PropertiesListItem name="layout" type="'inset' | 'compact'">
    The layout mode for the chat. Use `'inset'` (default) for standalone chats,
    or `'compact'` for embedded scenarios like pop-up windows.
  </PropertiesListItem>
  <PropertiesListItem name="overrides" type="AiChatOverrides">
    Advanced customization options for overriding default chat behavior and
    styling.
  </PropertiesListItem>
  <PropertiesListItem name="components" type="AiChatComponents">
    Custom components to override specific parts of the chat UI, such as the
    `Empty` placeholder component or Markdown components.
  </PropertiesListItem>
  <PropertiesListItem name="className" type="string">
    CSS class name to apply to the chat container.
  </PropertiesListItem>
  <PropertiesListItem name="style" type="CSSProperties">
    Inline styles to apply to the chat container. Useful for setting CSS custom
    properties.
  </PropertiesListItem>
</PropertiesList>

###### components [#AiChat-components]

Override specific parts of `AiChat` with custom components.

<PropertiesList>
  <PropertiesListItem
    name="Empty"
    type="({ chatId: string, copilotId?: string }) => ReactNode"
  >
    The component used to render the empty state of the chat. Defaults to
    nothing.
  </PropertiesListItem>
  <PropertiesListItem name="Loading" type="() => ReactNode">
    The component used to render the loading state of the chat. Defaults to a
    loading spinner.
  </PropertiesListItem>
  <PropertiesListItem name="markdown" type="Partial<MarkdownComponents>">
    The components used to render Markdown content.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Paragraph"
    type="({ children: ReactNode }) => ReactNode"
  >
    The component used to render paragraphs.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Inline"
    detailedType={`({ type: "strong" | "em" | "code" | "del", children: ReactNode }) => ReactNode`}
  >
    The component used to render inline elements (bold, italic, strikethrough,
    and inline code).
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Link"
    type={`({ href: string, title?: string, children: ReactNode }) => ReactNode`}
  >
    The component used to render links.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Heading"
    type={`({ level: 1 | 2 | 3 | 4 | 5 | 6, children: ReactNode }) => ReactNode`}
  >
    The component used to render headings.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Blockquote"
    type="({ children: ReactNode }) => ReactNode"
  >
    The component used to render blockquotes.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.CodeBlock"
    type={`({ code: string, language?: string }) => ReactNode`}
  >
    The component used to render code blocks.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Image"
    type={`({ src: string, alt: string, title?: string }) => ReactNode`}
  >
    The component used to render images.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.List"
    detailedType={`({ type: "ordered" | "unordered", items: { checked?: boolean, children: ReactNode }[], start?: number }) => ReactNode`}
  >
    The component used to render lists.
  </PropertiesListItem>
  <PropertiesListItem
    name="markdown.Table"
    detailedType={`({ headings: { align?: "left" | "center" | "right"; children: ReactNode }[], rows: { align?: "left" | "center" | "right"; children: ReactNode }[] }) => ReactNode`}
  >
    The component used to render tables.
  </PropertiesListItem>
  <PropertiesListItem name="markdown.Separator" type="() => ReactNode">
    The component used to render separators.
  </PropertiesListItem>
</PropertiesList>

#### AiTool

Displays [AI tool calls](/docs/ready-made-features/ai-copilots/features#tools)
and their progress. Can be customized for many different UIs.

{/* TODO AI tool image */}

```tsx
<AiTool />
```

By default, `AiTool` will display the name of the current tool, and a loading
spinner as it runs.

```tsx
import { defineAiTool } from "@liveblocks/client";
import { RegisterAiTool } from "@liveblocks/react";
import { AiTool, AiChat } from "@liveblocks/react-ui";

function App() {
  return (
    <>
      <RegisterAiTool
        name="get-weather"
        tool={defineAiTool()({
          description: "Get current weather information",
          parameters: {
            type: "object",
            properties: {
              location: { type: "string", description: "City name" },
            },
            required: ["location"],
            additionalProperties: false,
          },
          execute: async (args) => {
            const { temperature, condition } = await __getWeather__(
              args.location
            );
            return { data: { temperature, condition } };
          },
          render: ({ result }) => (
            // +++
            <AiTool>
              {result ? (
                <div>
                  {result.temperature}¬∞F - {result.condition}
                </div>
              ) : null}
            </AiTool>
            // +++
          ),
        })}
      />
      <AiChat chatId="my-chat" />
    </>
  );
}
```

Optionally, you can provide a `title` and `icon` to render the UI differently.

```tsx
// Title
render: () => <AiTool title="Event booked" />

// Title and a collapsible description
render: () => <AiTool title="Event booked">We've booked the event!</AiTool>,

// Title and emoji icon
render: () => <AiTool title="Event booked" icon="üìÖ" />,

// Title and icon component
render: () => <AiTool title="Event booked" icon={<Icon.Calendar />} />,

// Props are passed to the inner `div`
render: () => (
  <AiTool
    title="Event booked"
    style={{ marginLeft: 10 }}
    className="event-booked-tool"
    onMouseOver={() => console.log("Hovered")}
  />
),
```

##### Props [#AiTool-props]

<PropertiesList>
  <PropertiesListItem name="title" type="string">
    The title to display for the tool. If not provided, the tool name will be
    formatted as a human-readable string.
  </PropertiesListItem>
  <PropertiesListItem name="icon" type="ReactNode">
    Icon to display alongside the tool title. Can be an emoji string, React
    component, or any ReactNode.
  </PropertiesListItem>
  <PropertiesListItem name="children" type="ReactNode">
    Content to display inside the tool container. Typically used for
    tool-specific UI or descriptions.
  </PropertiesListItem>
  <PropertiesListItem name="variant" type="'block' | 'minimal'">
    The visual appearance of the tool. The `"block"` variant (default) displays
    the tool as a block with a border.
  </PropertiesListItem>
  <PropertiesListItem name="collapsed" type="boolean">
    Whether the tool content should be collapsed. When collapsed, only the title
    and icon are visible.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCollapsedChange"
    type="(collapsed: boolean) => void"
  >
    Callback fired when the collapsed state changes. Use this to control the
    collapsed state externally.
  </PropertiesListItem>
  <PropertiesListItem name="collapsible" type="boolean">
    Whether the tool content can be collapsed. If set to `false`, clicking on it
    will have no effect. If there's no content, this prop has no effect.
  </PropertiesListItem>
  <PropertiesListItem name="className" type="string">
    CSS class name to apply to the tool container.
  </PropertiesListItem>
  <PropertiesListItem name="style" type="CSSProperties">
    Inline styles to apply to the tool container.
  </PropertiesListItem>
</PropertiesList>

All other HTML `div` props are also supported and will be passed through to the
underlying container element.

##### AiTool.Confirmation

Displays an AI tool with a confirmation UI. This allows you to create actions
that users must confirm or cancel before they‚Äôre run.

```tsx
<AiTool>
  <AiTool.Confirmation confirm={() => /* ... */} cancel={() => /* ... */} />
</AiTool>
```

{/* TODO ai tool confirmation image */}

Use the `confirm` and `cancel` props to define which actions should be taken
when the users clicks the buttons. You can return information that helps the AI
understand what has taken place, and data which you can use in `render` after
the tool is called.

```tsx
import { defineAiTool } from "@liveblocks/client";
import { RegisterAiTool } from "@liveblocks/react";
import { AiTool } from "@liveblocks/react-ui";

const deleteFileTool = defineAiTool<{ deletedFileName: string }>()({
  description: "Delete a file from the user's workspace",
  parameters: {
    type: "object",
    properties: {
      fileName: { type: "string", description: "Name of the file to delete" },
    },
    required: ["fileName"],
    additionalProperties: false,
  },
  render: ({ stage, args, result, types }) => {
    if (stage === "receiving") {
      return "Loading...";
    }
    return (
      <AiTool title="Delete File" icon="üóëÔ∏è">
        {!result.data ? (
          // +++
          <AiTool.Confirmation
            // Make `confirm` and `cancel` type-safe
            types={types}
            confirm={async ({ fileName }) => {
              await deleteFile(fileName);
              return {
                data: { deletedFileName: fileName },
              };
            }}
          >
            Are you sure you want to delete {args.fileName}?
          </AiTool.Confirmation>
        ) : (
          // +++
          <div>Deleted {result.data.deletedFileName}</div>
        )}
      </AiTool>
    );
  },
});

function App() {
  return (
    <>
      <RegisterAiTool name="delete-file" tool={deleteFileTool} />
      <AiChat chatId="my-chat" />
    </>
  );
}
```

`AiTool.Confirmation` will display different content depending on the stage of
the tool. For example, the confirm and cancel buttons will disappear when
clicked.

###### Props [#AiTool.Confirmation-props]

<PropertiesList>
  <PropertiesListItem
    name="confirm"
    type="(args: TArgs) => Promise<ToolResultResponse>"
    isRequired
  >
    Function called when the user clicks the confirm button. It can return data
    which will be stored and accessible in `render`, and optionally also a
    description for the AI to understand the result: `{ data: { formId: 123 }, description: "The user accepted and submitted the form" }`
  </PropertiesListItem>
  <PropertiesListItem
    name="cancel"
    type="(args: TArgs) => Promise<ToolResultResponse>"
  >
    Function called when the user clicks the cancel button.
  </PropertiesListItem>
  <PropertiesListItem name="children" type="ReactNode">
    Content to display in the confirmation UI. Typically a question or
    description of the action being confirmed.
  </PropertiesListItem>
  <PropertiesListItem name="variant" type="'destructive' | 'default'">
    The visual appearance of the confirmation UI.
  </PropertiesListItem>
  <PropertiesListItem
    name="overrides"
    type="Partial<GlobalOverrides & AiToolConfirmationOverrides>"
  >
    Override the component‚Äôs strings. It can be used the change the "confirm"
    and "cancel" labels.
  </PropertiesListItem>
</PropertiesList>

All other HTML `div` props are also supported and will be passed through to the
underlying element.

##### AiTool.Inspector

Displays formatted view of the JSON arguments sent to and results returned by
the AI during the current tool invocation. This is useful for debugging or for
providing developers with insight into the data exchanged within your app.

```tsx
<AiTool>
  <AiTool.Inspector />
</AiTool>
```

To use, simply include `<AiTool.Inspector />` inside an `<AiTool />` component
to display the tool‚Äôs input arguments and resulting output.

```tsx
import { defineAiTool } from "@liveblocks/client";
import { RegisterAiTool } from "@liveblocks/react";
import { AiTool, AiChat } from "@liveblocks/react-ui";

function App() {
  return (
    <>
      <RegisterAiTool
        name="toggle-todo"
        tool={defineAiTool()({
          description: "Toggle a todo's completion status",
          parameters: {
            type: "object",
            properties: {
              id: {
                description: "The id of the todo to toggle",
                type: "number",
              },
            },
            required: ["id"],
            additionalProperties: false,
          },
          execute: ({ id }) => {
            toggleTodo(id);
          },
          render: () => (
            <AiTool>
              // +++
              <AiTool.Inspector />
              // +++
            </AiTool>
          ),
        })}
      />
      <AiChat chatId="my-chat" />
    </>
  );
}
```

###### Props [#AiTool.Inspector-props]

All HTML `div` props are supported and will be passed through to the underlying
element.

## Comments

### Default components [#Components]

#### Thread

Displays a thread of comments. Each thread has a composer for creating replies.

```tsx
<Thread thread={thread} />
```

<Figure>
  <Image
    src="/assets/comments/thread.png"
    alt="Thread"
    width={768}
    height={446}
  />
</Figure>

Map through `threads` to render a list of the room‚Äôs threads and comments.
Threads can be retrieved with
[`useThreads`](/docs/api-reference/liveblocks-react#useThreads).

```tsx highlight="10"
import { Thread } from "@liveblocks/react-ui";
import { useThreads } from "@liveblocks/react/suspense";

function Component() {
  const { threads } = useThreads();

  return (
    <>
      {threads.map((thread) => (
        <Thread key={thread.id} thread={thread} />
      ))}
    </>
  );
}
```

##### Resolved and unresolved threads

A thread can be marked as resolved or unresolved via its `resolved` property.
The `Thread` component automatically handles this through its `resolved` toggle
button displayed by default.

You can additionally use `thread.resolved` to filter the displayed threads for
example. Or if you want to create your own `Thread` component using
[the primitives](/docs/ready-made-features/comments/primitives), you can use
[`useMarkThreadAsResolved`](/docs/api-reference/liveblocks-react#useMarkThreadAsResolved)
and
[`useMarkThreadAsUnresolved`](/docs/api-reference/liveblocks-react#useMarkThreadAsUnresolved)
to update the property.

##### Collapsed threads

You can collapse threads by setting the `maxVisibleComments` prop. If a thread
contains more comments than the limit set, some of the comments will be hidden
and a "Show more replies" button will be displayed instead. Clicking on it will
expand the thread to show all comments.

```tsx
<Thread thread={thread} maxVisibleComments={5} />
```

The first and last comments are always visible, and by default the oldest
comments are more likely to be hidden. You can customize this behavior by
setting `maxVisibleComments` to an object.

```tsx
// This is the default behavior, the same as `maxVisibleComments={5}`.
<Thread thread={thread} maxVisibleComments={{ max: 5, show: "newest" }} />

// Only show the last comment, and all the older ones to fit the limit.
<Thread thread={thread} maxVisibleComments={{ max: 5, show: "oldest" }} />

// Show as many old comments as new ones to fit the limit.
<Thread thread={thread} maxVisibleComments={{ max: 5, show: "both" }} />
```

##### Props [#Thread-props]

<PropertiesList>
  <PropertiesListItem name="thread" type="ThreadData" required>
    The thread to display.
  </PropertiesListItem>
  <PropertiesListItem
    name="showComposer"
    type='boolean | "collapsed"'
    defaultValue='"collapsed"'
  >
    How to show or hide the composer to reply to the thread.
  </PropertiesListItem>
  <PropertiesListItem
    name="showActions"
    type='boolean | "hover"'
    defaultValue='"hover"'
  >
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="showReactions" type="boolean" defaultValue="true">
    Whether to show reactions.
  </PropertiesListItem>
  <PropertiesListItem name="showAttachments" type="boolean" defaultValue="true">
    Whether to show attachments.
  </PropertiesListItem>
  <PropertiesListItem
    name="showComposerFormattingControls"
    type="boolean"
    defaultValue="true"
  >
    Whether to show the composer‚Äôs formatting controls.
  </PropertiesListItem>
  <PropertiesListItem
    name="blurComposerOnSubmit"
    type="boolean"
    defaultValue="true"
  >
    Whether to blur the composer editor when the composer is submitted.
  </PropertiesListItem>
  <PropertiesListItem
    name="showResolveAction"
    type="boolean"
    defaultValue="true"
  >
    Whether to show the action to resolve the thread.
  </PropertiesListItem>
  <PropertiesListItem
    name="maxVisibleComments"
    type="number | object"
    detailedType='number | { max: number; show: "oldest" | "newest" | "both" }'
    defaultValue="No limit"
  >
    The maximum number of comments to show.
  </PropertiesListItem>
  <PropertiesListItem
    name="indentCommentContent"
    type="boolean"
    defaultValue="true"
  >
    Whether to indent the comments‚Äô content.
  </PropertiesListItem>
  <PropertiesListItem
    name="showDeletedComments"
    type="boolean"
    defaultValue="false"
  >
    Whether to show deleted comments.
  </PropertiesListItem>
  <PropertiesListItem
    name="onComposerSubmit"
    type="function"
    detailedType="(comment: ComposerSubmitComment, event: FormEvent<HTMLFormElement>) => Promise<void> | void"
  >
    The event handler called when the composer is submitted.
  </PropertiesListItem>
  <PropertiesListItem
    name="onResolvedChange"
    type="function"
    detailedType="(resolved: boolean) => void"
  >
    The event handler called when changing the resolved status.
  </PropertiesListItem>
  <PropertiesListItem
    name="onThreadDelete"
    type="function"
    detailedType="(thread: ThreadData) => void"
  >
    The event handler called when the thread is deleted. A thread is deleted
    when all its comments are deleted.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCommentEdit"
    type="function"
    detailedType="(comment: CommentData) => void"
  >
    The event handler called when a comment is edited.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCommentDelete"
    type="function"
    detailedType="(comment: CommentData) => void"
  >
    The event handler called when a comment is deleted.
  </PropertiesListItem>
  <PropertiesListItem
    name="onAuthorClick"
    type="function"
    detailedType="(userId: string, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on a comment‚Äôs author.
  </PropertiesListItem>
  <PropertiesListItem
    name="onMentionClick"
    type="function"
    detailedType="(mention: MentionData, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on a mention.
  </PropertiesListItem>
  <PropertiesListItem
    name="onAttachmentClick"
    type="function"
    detailedType="(args: CommentAttachmentArgs, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on a comment‚Äôs attachment.
  </PropertiesListItem>
  <PropertiesListItem
    name="overrides"
    type="Partial<GlobalOverrides & ThreadOverrides & CommentOverrides & ComposerOverrides>"
  >
    Override the component‚Äôs strings.
  </PropertiesListItem>
</PropertiesList>

{/* TODO: Document classes and data attributes */}

#### Composer

Displays a composer for creating threads or comments.

```tsx
<Composer />
```

<Figure>
  <Image
    src="/assets/comments/composer.png"
    alt="Composer"
    width={768}
    height={446}
  />
</Figure>

By default, submitting the composer will create a new thread.

```tsx
import { Composer } from "@liveblocks/react-ui";

// Creates a new thread
function Component() {
  return <Composer />;
}
```

##### Adding thread metadata

If you‚Äôd like to attach custom metadata to the newly created thread, you can add
a `metadata` prop.

```tsx
import { Composer } from "@liveblocks/react-ui";

// Creates a new thread with custom metadata
function Component() {
  return (
    <Composer
      metadata={{
        // Custom metadata here, e.g. colors, coordinates
        color: "purple",
        x: 80,
        y: 120,
      }}
    />
  );
}
```

###### Typed metadata

You can use TypeScript to type your custom metadata by editing your config file.
Metadata properties can be `string`, `number`, or `boolean`.

```ts file="liveblocks.config.ts"
declare global {
  interface Liveblocks {
    // Set your custom metadata types
    // +++
    ThreadMetadata: {
      // Example types, e.g. colors, coordinates
      color: string;
      x: number;
      y: number;
    };
    // +++

    // Other types
    // ...
  }
}
```

##### Replying to a thread

If you provide a `threadId`, then submitting the composer will add a new reply
to the thread.

```tsx
import { Composer } from "@liveblocks/react-ui";

// Adds a new comment to a thread
function Component({ threadId }) {
  return <Composer threadId={threadId} />;
}
```

##### Modifying a comment

If you provide both a `threadId` and a `commentId`, then submitting the composer
will edit the comment.

```tsx
import { Composer } from "@liveblocks/react-ui";

// Edits an existing comment
function Component({ threadId, commentId }) {
  return <Composer threadId={threadId} commentId={commentId} />;
}
```

##### Custom behavior

If you‚Äôd like to customize submission behavior, you can use
`event.preventDefault()` in `onComposerSubmit` to disable the default behavior
and call comment and thread mutation methods manually.

```tsx
import { Composer } from "@liveblocks/react-ui";
import { useEditComment, useAddReaction } from "@liveblocks/react/suspense";

// Custom submission behavior (edits a comment and adds a reaction)
function Component({ threadId, commentId }) {
  const editComment = useEditComment();
  const addReaction = useAddReaction();

  return (
    <Composer
      onComposerSubmit={({ body, attachments }, event) => {
        event.preventDefault();

        // Example mutations
        editComment({ threadId, commentId, body, attachments });
        addReaction({ threadId, commentId, emoji: "‚úÖ" });

        // Other custom behavior
        // ...
      }}
    />
  );
}
```

Learn more about mutation hooks under
[`@liveblocks/react`](/docs/api-reference/liveblocks-react#Comments).

##### Props [#Composer-props]

<PropertiesList>
  <PropertiesListItem name="threadId" type="string">
    The ID of the thread to reply to or to edit a comment in.
  </PropertiesListItem>
  <PropertiesListItem name="commentId" type="string">
    The ID of the comment to edit.
  </PropertiesListItem>
  <PropertiesListItem name="metadata" type="ThreadMetadata">
    The metadata of the thread to create.
  </PropertiesListItem>
  <PropertiesListItem
    name="onComposerSubmit"
    type="function"
    detailedType="(comment: ComposerSubmitComment, event: FormEvent<HTMLFormElement>) => Promise<void> | void"
  >
    The event handler called when the composer is submitted.
  </PropertiesListItem>
  <PropertiesListItem name="blurOnSubmit" type="boolean" defaultValue="true">
    Whether to blur the composer editor when the composer is submitted.
  </PropertiesListItem>
  <PropertiesListItem name="defaultValue" type="CommentBody">
    The composer‚Äôs initial value.
  </PropertiesListItem>
  <PropertiesListItem name="defaultAttachments" type="CommentAttachment[]">
    The composer‚Äôs initial attachments.
  </PropertiesListItem>
  <PropertiesListItem name="collapsed" type="boolean">
    Whether the composer is collapsed. Setting a value will make the composer
    controlled.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCollapsedChange"
    type="function"
    detailedType="(collapsed: boolean) => void"
  >
    The event handler called when the collapsed state of the composer changes.
  </PropertiesListItem>
  <PropertiesListItem name="showAttachments" type="boolean" defaultValue="true">
    Whether to show and allow adding attachments.
  </PropertiesListItem>
  <PropertiesListItem
    name="showFormattingControls"
    type="boolean"
    defaultValue="true"
  >
    Whether to show formatting controls (e.g. a floating toolbar with formatting
    toggles when selecting text)
  </PropertiesListItem>
  <PropertiesListItem name="defaultCollapsed" type="boolean">
    Whether the composer is initially collapsed. Setting a value will make the
    composer uncontrolled.
  </PropertiesListItem>
  <PropertiesListItem name="disabled" type="boolean">
    Whether the composer is disabled.
  </PropertiesListItem>
  <PropertiesListItem name="autoFocus" type="boolean">
    Whether to focus the composer on mount.
  </PropertiesListItem>
  <PropertiesListItem
    name="overrides"
    type="Partial<GlobalOverrides & ComposerOverrides>"
  >
    Override the component‚Äôs strings.
  </PropertiesListItem>
</PropertiesList>

#### Comment

Displays a single comment.

```tsx
<Comment comment={comment} />
```

<Figure>
  <Image
    src="/assets/comments/comment.png"
    alt="Comment"
    width={768}
    height={446}
  />
</Figure>

Map through `thread.comments` to render each comment in a thread. Threads can be
retrieved with [`useThreads`](/docs/api-reference/liveblocks-react#useThreads).

```tsx highlight="9"
import { Comment } from "@liveblocks/react-ui";
import { ThreadData } from "@liveblocks/client";

// Renders a list of comments attach to the specified `thread`
function Component({ thread }: { thread: ThreadData }) {
  return (
    <>
      {thread.comments.map((comment) => (
        <Comment key={comment.id} comment={comment} />
      ))}
    </>
  );
}
```

##### Custom thread components

[`Comment`](#Comment) can be used in combination with [`Composer`](#Composer) to
create a custom thread component. The composer in this example is used to
[reply to the existing thread](/docs/api-reference/liveblocks-react-ui#Replying-to-a-thread).

```tsx highlight="10"
import { Comment, Composer } from "@liveblocks/react-ui";
import { ThreadData } from "@liveblocks/client";
import { useThreads } from "@liveblocks/react/suspense";

// Renders a list of comments and a composer for adding new comments
function CustomThread({ thread }: { thread: ThreadData }) {
  return (
    <>
      {thread.comments.map((comment) => (
        <Comment key={comment.id} comment={comment} />
      ))}
      <Composer threadId={thread.id} />
    </>
  );
}

// Renders a list of custom thread components
function Component() {
  const { threads } = useThreads();

  return (
    <>
      {threads.map((thread) => (
        <CustomThread key={thread.id} />
      ))}
    </>
  );
}
```

##### Props [#Comment-props]

<PropertiesList>
  <PropertiesListItem name="comment" type="CommentData" required>
    The comment to display.
  </PropertiesListItem>
  <PropertiesListItem
    name="showActions"
    type='boolean | "hover"'
    defaultValue='"hover"'
  >
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="showReactions" type="boolean" defaultValue="true">
    Whether to show reactions.
  </PropertiesListItem>
  <PropertiesListItem name="showAttachments" type="boolean" defaultValue="true">
    Whether to show attachments.
  </PropertiesListItem>
  <PropertiesListItem
    name="showComposerFormattingControls"
    type="boolean"
    defaultValue="true"
  >
    Whether to show the composer‚Äôs formatting controls when editing the comment.
  </PropertiesListItem>
  <PropertiesListItem name="indentContent" type="boolean" defaultValue="true">
    Whether to indent the comment‚Äôs content.
  </PropertiesListItem>
  <PropertiesListItem name="showDeleted" type="boolean" defaultValue="false">
    Whether to show the comment if it was deleted. If set to `false`, it will
    render deleted comments as `null`.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCommentEdit"
    type="function"
    detailedType="(comment: CommentData) => void"
  >
    The event handler called when the comment is edited.
  </PropertiesListItem>
  <PropertiesListItem
    name="onCommentDelete"
    type="function"
    detailedType="(comment: CommentData) => void"
  >
    The event handler called when the comment is deleted.
  </PropertiesListItem>
  <PropertiesListItem
    name="onAuthorClick"
    type="function"
    detailedType="(userId: string, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on the author.
  </PropertiesListItem>
  <PropertiesListItem
    name="onMentionClick"
    type="function"
    detailedType="(mention: MentionData, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on a mention.
  </PropertiesListItem>
  <PropertiesListItem
    name="onAttachmentClick"
    type="function"
    detailedType="(args: CommentAttachmentArgs, event: MouseEvent<HTMLElement>) => void"
  >
    The event handler called when clicking on a comment‚Äôs attachment.
  </PropertiesListItem>
  <PropertiesListItem
    name="overrides"
    type="Partial<GlobalOverrides & CommentOverrides & ComposerOverrides>"
  >
    Override the component‚Äôs strings.
  </PropertiesListItem>
</PropertiesList>

### Primitives

Primitives are unstyled, headless components that can be used to create fully
custom commenting experiences. We have a
[primitives example](/examples/comments-primitives) highlighting how to use
them.

<Banner title="Using primitives with TypeScript">

If you run into the
`Cannot find module '@liveblocks/react-ui/primitives' or its corresponding type declarations`
error, you should update your `tsconfig.json`‚Äôs `moduleResolution`
[property](https://www.typescriptlang.org/tsconfig#moduleResolution) to
`"node16"` or `"nodenext"` (or `"bundler"` if you‚Äôre on TS >=5).

</Banner>

#### Composition

All primitives are composable; they forward their props and refs, merge their
classes and styles, and chain their event handlers.

Inspired by [Radix](https://www.radix-ui.com/) (and powered by its
[`Slot`](https://www.radix-ui.com/primitives/docs/utilities/slot) utility), most
of the primitives also support an `asChild` prop to replace the rendered element
by any provided child, and both set of props will be merged.

```tsx
import { Button } from "@/my-design-system";

// Use the default <button> element
<Composer.Submit disabled>Send</Composer.Submit>;

// Use an existing custom <Button> component
<Composer.Submit disabled asChild>
  <Button variant="primary">Send</Button>
</Composer.Submit>;
```

Learn more about this concept on
[Radix‚Äôs composition guide](https://www.radix-ui.com/primitives/docs/guides/composition).

#### Composer [#primitives-Composer]

Used to render a composer for creating, or editing, threads and comments.

```tsx
<Composer.Form>
  <Composer.AttachmentsDropArea />
  <Composer.Editor
    components={{
      Mention: () => <Composer.Mention />,
      MentionSuggestions: () => (
        <Composer.Suggestions>
          <Composer.SuggestionsList>
            <Composer.SuggestionsListItem />
          </Composer.SuggestionsList>
        </Composer.Suggestions>
      ),
      Link: () => <Composer.Link />,
    }}
  />
  <Composer.AttachFiles />
  <Composer.Submit />
</Composer.Form>
```

Combine with
[`useCreateThread`](/docs/api-reference/liveblocks-react#useCreateThread) to
render a composer that creates threads.

```tsx
import {
  Composer,
  CommentBodyLinkProps,
  CommentBodyMentionProps,
  ComposerEditorMentionSuggestionsProps,
  ComposerSubmitComment,
} from "@liveblocks/react-ui/primitives";
import { useCreateThread, useUser } from "@liveblocks/react/suspense";
import { FormEvent } from "react";

// Render a custom composer that creates a thread on submit
function MyComposer() {
  // +++
  const createThread = useCreateThread();
  // +++

  function handleComposerSubmit(
    { body, attachments }: ComposerSubmitComment,
    event: FormEvent<HTMLFormElement>
  ) {
    event.preventDefault();

    // Create a new thread
    // +++
    const thread = createThread({
      body,
      attachments,
      metadata: {},
    });
    //+++
  }

  return (
    // +++
    <Composer.Form onComposerSubmit={handleComposerSubmit}>
      <Composer.Editor
        components={{
          Mention,
          MentionSuggestions,
          Link,
        }}
      />
      <Composer.Submit>Create thread</Composer.Submit>
    </Composer.Form>
    // +++
  );
}

// Render a mention in the composer's editor, e.g. "@Emil Joyce"
function Mention({ mention }: CommentBodyMentionProps) {
  return <Comment.Mention>@{mention.id}</Comment.Mention>;
}

// Render a list of mention suggestions, used after typing "@" in the editor
function MentionSuggestions({
  mentions,
  selectedMentionId,
}: ComposerEditorMentionSuggestionsProps) {
  return (
    <Composer.Suggestions>
      <Composer.SuggestionsList>
        {mentions.map((mention) => {
          switch (mention.kind) {
            case "user":
              return (
                <UserMentionSuggestion key={mention.id} userId={mention.id} />
              );
            case "group":
              return (
                <GroupMentionSuggestion key={mention.id} groupId={mention.id} />
              );
          }
        })}
      </Composer.SuggestionsList>
    </Composer.Suggestions>
  );
}

// Render a single mention suggestion from a `userId`
function UserMentionSuggestion({ userId }: { userId: string }) {
  const { user } = useUser(userId);

  return (
    <Composer.SuggestionsListItem value={user.id}>
      <img src={user.avatar} alt={user.name} />
      {user.name}
    </Composer.SuggestionsListItem>
  );
}

// Render a single mention suggestion from a `groupId`
function GroupMentionSuggestion({ groupId }: { groupId: string }) {
  const { group } = useGroupInfo(groupId);

  return (
    <Composer.SuggestionsListItem value={group.id}>
      <img src={group.avatar} alt={group.name} />
      {group.name}
    </Composer.SuggestionsListItem>
  );
}

// Render a link in the composer's editor, e.g. "https://liveblocks.io"
function Link({ href, children }: CommentBodyLinkProps) {
  return <Comment.Link href={href}>{children}</Comment.Link>;
}
```

##### Composer.Form [#primitives-Composer.Form]

Surrounds the composer‚Äôs content and handles submissions. By default, no action
occurs when the composer is submitted. You must create your own mutations within
`onComposerSubmit` for
[creating threads](/docs/api-reference/liveblocks-react#useCreateThread),
[creating comments](/docs/api-reference/liveblocks-react#useCreateComment),
[editing comments](/docs/api-reference/liveblocks-react#useEditComment), etc.

```tsx
<Composer.Form
  onComposerSubmit={({ body, attachments }) => {
    // Mutate your comments
    // ...
  }}
>
  {/* ... */}
</Composer.Form>
```

<PropertiesList>
  <PropertiesListItem name="defaultAttachments" type="CommentAttachment[]">
    The composer‚Äôs initial attachments.
  </PropertiesListItem>
  <PropertiesListItem
    name="pasteFilesAsAttachments"
    type="boolean"
    defaultValue="false"
  >
    Whether to create attachments when pasting files into the editor.
  </PropertiesListItem>
  <PropertiesListItem
    name="preventUnsavedChanges"
    type="boolean"
    defaultValue="true"
  >
    When `preventUnsavedChanges` is set on your [Liveblocks
    client](/docs/api-reference/liveblocks-client#prevent-users-losing-unsaved-changes)
    on
    [`LiveblocksProvider`](/docs/api-reference/liveblocks-react#prevent-users-losing-unsaved-changes),
    then closing a browser tab will be prevented when there are unsaved changes.
    By default, that will include draft text or attachments that are being
    uploaded via this composer, but not submitted yet. If you want to prevent
    unsaved changes with Liveblocks, but not for this composer, you can opt-out
    this composer instance by setting this prop to `false`.
  </PropertiesListItem>
  <PropertiesListItem name="blurOnSubmit" type="boolean" defaultValue="true">
    Whether to blur the editor when the form is submitted.
  </PropertiesListItem>
  <PropertiesListItem
    name="onComposerSubmit"
    type="function"
    detailedType="(comment: ComposerSubmitComment, event: FormEvent<HTMLFormElement>) => Promise<void> | void"
  >
    The event handler called when the form is submitted.
  </PropertiesListItem>
  <PropertiesListItem name="disabled" type="boolean" defaultValue="false">
    Whether the composer is disabled.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.Editor [#primitives-Composer.Editor]

Displays the composer‚Äôs editor.

```tsx
<Composer.Editor placeholder="Write a comment‚Ä¶" />
```

<PropertiesList>
  <PropertiesListItem name="defaultValue" type="CommentBody">
    The editor‚Äôs initial value.
  </PropertiesListItem>
  <PropertiesListItem name="placeholder" type="string">
    The text to display when the editor is empty.
  </PropertiesListItem>
  <PropertiesListItem name="disabled" type="boolean">
    Whether the editor is disabled.
  </PropertiesListItem>
  <PropertiesListItem name="autoFocus" type="boolean">
    Whether to focus the editor on mount.
  </PropertiesListItem>
  <PropertiesListItem name="dir" type='"ltr" | "rtl"'>
    The reading direction of the editor and related elements.
  </PropertiesListItem>
  <PropertiesListItem
    name="components"
    type="Partial<ComposerEditorComponents>"
  >
    The components displayed within the editor.
  </PropertiesListItem>
</PropertiesList>

<Table columns={["28%", "auto"]}>

| Attribute       | Value                                   |
| --------------- | --------------------------------------- |
| `data-focused`  | Present when the component is focused.  |
| `data-disabled` | Present when the component is disabled. |

</Table>

###### components [#primitives-Composer.Editor-components]

The components displayed within the editor.

<PropertiesList>
  <PropertiesListItem
    name="Mention"
    type="ComponentType<ComposerEditorMentionProps>"
  >
    The component used to display mentions. Defaults to the mention‚Äôs `id`
    prefixed by an @.
  </PropertiesListItem>
  <PropertiesListItem
    name="MentionSuggestions"
    type="ComponentType<ComposerEditorMentionSuggestionProps>"
  >
    The component used to display mention suggestions. Defaults to a list of the
    suggested mentions‚Äô `id`.
  </PropertiesListItem>
  <PropertiesListItem name="Link" type="ComponentType<ComposerEditorLinkProps>">
    The component used to display links. Defaults to the link‚Äôs `children`
    property.
  </PropertiesListItem>
  <PropertiesListItem
    name="FloatingToolbar"
    type="ComponentType<ComposerEditorFloatingToolbarProps>"
  >
    The component used to display a floating toolbar attached to the selection.
  </PropertiesListItem>
</PropertiesList>

###### Mention [#primitives-Composer.Editor-Mention]

The component used to display mentions.

```tsx
<Composer.Editor
  components={{
    Mention: ({ mention, isSelected }) => (
      <Composer.Mention>@{mention.id}</Composer.Mention>
    ),
  }}
/>
```

<PropertiesList>
  <PropertiesListItem name="mention" type="MentionData">
    The mention to display.
  </PropertiesListItem>
  <PropertiesListItem name="isSelected" type="boolean">
    Whether the mention is selected.
  </PropertiesListItem>
</PropertiesList>

###### MentionSuggestions [#primitives-Composer.Editor-MentionSuggestions]

The component used to display mention suggestions.

<PropertiesList>
  <PropertiesListItem name="mentions" type="MentionData[]">
    The list of suggested mentions.
  </PropertiesListItem>
  <PropertiesListItem name="selectedMentionId" type="string">
    The currently selected mention‚Äôs ID.
  </PropertiesListItem>
</PropertiesList>

```tsx
<Composer.Editor
  components={{
    MentionSuggestions: () => (
      <Composer.Suggestions>
        <Composer.SuggestionsList>
          <Composer.SuggestionsListItem />
        </Composer.SuggestionsList>
      </Composer.Suggestions>
    ),
  }}
/>
```

###### Link [#primitives-Composer.Editor-Link]

The component used to display links.

```tsx
<Composer.Editor
  components={{
    Link: ({ href, children }) => <Composer.Link>{children}</Composer.Link>,
  }}
/>
```

<PropertiesList>
  <PropertiesListItem name="href" type="string">
    The link‚Äôs absolute URL.
  </PropertiesListItem>
  <PropertiesListItem name="children" type="ReactNode">
    The link‚Äôs content.
  </PropertiesListItem>
</PropertiesList>

###### FloatingToolbar [#primitives-Composer.Editor-FloatingToolbar]

Displays a floating toolbar attached to the selection within `Composer.Editor`.

```tsx
<Composer.Editor
  components={{
    FloatingToolbar: () => (
      <Composer.FloatingToolbar>
        <Composer.MarkToggle mark="bold">Bold</Composer.MarkToggle>
        <Composer.MarkToggle mark="italic">Italic</Composer.MarkToggle>
      </Composer.FloatingToolbar>
    ),
  }}
/>
```

##### Composer.Mention [#primitives-Composer.Mention]

Displays mentions within `Composer.Editor`.

```tsx
<Composer.Mention>@{mention.id}</Composer.Mention>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

<Table columns={["28%", "auto"]}>

| Attribute       | Value                                 |
| --------------- | ------------------------------------- |
| `data-selected` | Present when the mention is selected. |

</Table>

##### Composer.Suggestions [#primitives-Composer.Suggestions]

Contains suggestions within `Composer.Editor`.

```tsx
<Composer.Suggestions>{/* ... */}<Composer.Suggestions>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.SuggestionsList [#primitives-Composer.SuggestionsList]

Displays a list of suggestions within `Composer.Editor`.

```tsx
<Composer.SuggestionsList>
  {mentions.map((mention) => (
    <Composer.SuggestionsListItem key={mention.id} value={mention.id}>
      @{mention.id}
    </Composer.SuggestionsListItem>
  ))}
</Composer.SuggestionsList>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.SuggestionsListItem [#primitives-Composer.SuggestionsListItem]

Displays a suggestion within `Composer.SuggestionsList`.

```tsx
<Composer.SuggestionsListItem key={mention.id} value={mention.id}>
  @{mention.id}
</Composer.SuggestionsListItem>
```

<PropertiesList>
  <PropertiesListItem name="value" type="string" required>
    The suggestion‚Äôs value.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

<Table columns={["28%", "auto"]}>

| Attribute       | Value                              |
| --------------- | ---------------------------------- |
| `data-selected` | Present when the item is selected. |

</Table>

##### Composer.Link [#primitives-Composer.Link]

Displays links within `Composer.Editor`.

```tsx
<Composer.Link href={href}>{children}</Composer.Link>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.Submit [#primitives-Composer.Submit]

A button to submit the composer.

```tsx
<Composer.Submit>Send</Composer.Submit>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.FloatingToolbar [#primitives-Composer.FloatingToolbar]

Displays a floating toolbar attached to the selection within `Composer.Editor`.

```tsx
<Composer.FloatingToolbar>
  <Composer.MarkToggle mark="bold">Bold</Composer.MarkToggle>
  <Composer.MarkToggle mark="italic">Italic</Composer.MarkToggle>
</Composer.FloatingToolbar>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.MarkToggle

A toggle button which toggles a specific text mark.

```tsx
<Composer.MarkToggle mark="bold">Bold</Composer.MarkToggle>
```

<PropertiesList>
  <PropertiesListItem name="mark" type="ComposerBodyMark" required>
    The text mark to toggle.
  </PropertiesListItem>
  <PropertiesListItem
    name="onValueChange"
    type="function"
    detailedType="(mark: ComposerBodyMark) => void"
  >
    The event handler called when the mark is toggled.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.AttachFiles [#primitives-Composer.AttachFiles]

A button which opens a file picker to create attachments.

```tsx
<Composer.AttachFiles>Attach files</Composer.AttachFiles>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Composer.AttachmentsDropArea [#primitives-Composer.AttachmentsDropArea]

A drop area which accepts files to create attachments.

```tsx
<Composer.AttachmentsDropArea>Drop files here</Composer.AttachmentsDropArea>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

#### Comment [#primitives-Comment]

Used to render a single comment.

```tsx
<Comment.Body
  components={{
    Mention: Comment.Mention,
    Link: Comment.Link,
  }}
/>
```

Map through `thread.comments` to render each comment in a thread. Threads can be
retrieved with [`useThreads`](/docs/api-reference/liveblocks-react#useThreads).

```tsx highlight="13-21"
import {
  Comment,
  CommentBodyLinkProps,
  CommentBodyMentionProps,
} from "@liveblocks/react-ui/primitives";
import { ThreadData } from "@liveblocks/client";

// Render custom comments in a thread. Pass a thread from `useThreads`.
function MyComments({ thread }: { thread: ThreadData }) {
  return (
    <>
      {thread.comments.map((comment) => (
        <div key={comment.id}>
          <Comment.Body
            body={comment.body}
            components={{
              Mention,
              Link,
            }}
          />
        </div>
      ))}
    </>
  );
}

// Render a mention in the comment, e.g. "@Emil Joyce"
function Mention({ mention }: CommentBodyMentionProps) {
  return <Comment.Mention>@{mention.id}</Comment.Mention>;
}

// Render a link in the comment, e.g. "https://liveblocks.io"
function Link({ href, children }: CommentBodyLinkProps) {
  return <Comment.Link href={href}>{children}</Comment.Link>;
}
```

##### Comment.Body [#primitives-Comment.Body]

Displays a comment body.

```tsx
<Comment.Body body={comment.body} />
```

<PropertiesList>
  <PropertiesListItem name="body" type="CommentBody">
    The comment body to display. If not defined, the component will render
    `null`.
  </PropertiesListItem>
  <PropertiesListItem name="components" type="Partial<CommentBodyComponents>">
    The components displayed within the comment body.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

###### components [#primitives-Comment.Body-components]

The components displayed within the comment body.

<PropertiesList>
  <PropertiesListItem
    name="Mention"
    type="ComponentType<CommentBodyMentionProps>"
  >
    The component used to display mentions. Defaults to the mention‚Äôs `id`
    prefixed by an @.
  </PropertiesListItem>
  <PropertiesListItem name="Link" type="ComponentType<CommentBodyLinkProps>">
    The component used to display links. Defaults to the link‚Äôs `children`
    property.
  </PropertiesListItem>
</PropertiesList>

###### Mention [#primitives-Comment.Body-Mention]

The component used to display mentions.

```tsx
<Comment.Body
  components={{
    Mention: ({ mention }) => <Comment.Mention>@{mention.id}</Comment.Mention>,
  }}
/>
```

<PropertiesList>
  <PropertiesListItem name="mention" type="MentionData">
    The mention to display.
  </PropertiesListItem>
</PropertiesList>

###### Link [#primitives-Comment.Body-Link]

The component used to display links.

```tsx
<Comment.Body
  components={{
    Link: ({ href, children }) => (
      <Comment.Link href={href}>{children}</Comment.Link>
    ),
  }}
/>
```

<PropertiesList>
  <PropertiesListItem name="href" type="string">
    The link‚Äôs absolute URL.
  </PropertiesListItem>
  <PropertiesListItem name="children" type="ReactNode">
    The link‚Äôs content.
  </PropertiesListItem>
</PropertiesList>

##### Comment.Mention [#primitives-Comment.Mention]

Displays mentions within `Comment.Body`.

```tsx
<Comment.Mention>@{mention.id}</Comment.Mention>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

##### Comment.Link [#primitives-Comment.Link]

Displays links within `Comment.Body`.

```tsx
<Comment.Link href={href}>{children}</Comment.Link>
```

<PropertiesList>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

#### Timestamp [#primitives-Timestamp]

Displays a formatted date, and automatically re-renders to support relative
formatting. Defaults to relative formatting for nearby dates (e.g. ‚Äú5 minutes
ago‚Äù or "in 1 day") and a short absolute formatting for more distant ones (e.g.
‚Äú25 Aug‚Äù).

```tsx
<Timestamp date={new Date()} />
```

Use with `comment.createdAt`, `comment.editedAt`, or `comment.deletedAt` to
display a human-readable time.

```tsx
import { Timestamp, Comment } from "@liveblocks/react-ui/primitives";
import { ThreadData } from "@liveblocks/client";

function MyComments({ thread }: { thread: ThreadData }) {
  return (
    <>
      {thread.comments.map((comment) => (
        <div key={comment.id}>
          // +++
          <Timestamp date={comment.createdAt} />
          // +++
          <Comment.Body body={comment.body} components={/* ... */} />
        </div>
      ))}
    </>
  );
}
```

<PropertiesList>
  <PropertiesListItem name="date" type="Date | string | number" required>
    The date to display.
  </PropertiesListItem>
  <PropertiesListItem
    name="children"
    type="function"
    detailedType="(date: Date) => ReactNode"
  >
    A function to format the displayed date. Defaults to a relative date
    formatting function.
  </PropertiesListItem>
  <PropertiesListItem
    name="title"
    type="string | function"
    detailedType="string | ((date: Date) => string)"
  >
    The `title` attribute‚Äôs value or a function to format it. Defaults to an
    absolute date formatting function.
  </PropertiesListItem>
  <PropertiesListItem
    name="interval"
    type="number | false"
    defaultValue="30000"
  >
    The interval in milliseconds at which the component will re-render. Can be
    set to `false` to disable re-rendering.
  </PropertiesListItem>
  <PropertiesListItem name="locale" type="string">
    The locale used when formatting the date. Defaults to the browser‚Äôs locale.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

#### Duration [#primitives-Duration]

Displays a formatted duration, and automatically re-renders to if the duration
is in progress. Defaults to a short format (e.g. ‚Äú5s‚Äù or ‚Äú1m 40s‚Äù).

```tsx
<Duration duration={3 * 60 * 1000} />
```

Instead of providing a duration in milliseconds, you can also provide start and
end dates for the duration via the `from` and `to` props. If only `from` is
provided it means that the duration is in progress, and the component will
re-render at an interval, customizable with the `interval` prop.

<PropertiesList>
  <PropertiesListItem name="duration" type="number">
    The duration in milliseconds. If provided, `from` and `to` will be ignored.
  </PropertiesListItem>
  <PropertiesListItem name="from" type="Date | string | number">
    The date at which the duration starts. If provided, `duration` will be
    ignored. If provided without `to` it means that the duration is in progress,
    and the component will re-render at an interval, customizable with the
    `interval` prop.
  </PropertiesListItem>
  <PropertiesListItem name="to" type="Date | string | number">
    The date at which the duration ends. If `from` is provided without `to`,
    `Date.now()` will be used.
  </PropertiesListItem>
  <PropertiesListItem
    name="children"
    type="function"
    detailedType="(duration: number) => ReactNode"
  >
    A function to format the displayed date. Defaults to a short duration
    formatting function.
  </PropertiesListItem>
  <PropertiesListItem
    name="title"
    type="string | function"
    detailedType="string | ((duration: number) => string)"
  >
    The `title` attribute‚Äôs value or a function to format it. Defaults to an
    longer duration formatting function.
  </PropertiesListItem>
  <PropertiesListItem name="interval" type="number | false" defaultValue="500">
    The interval in milliseconds at which the component will re-render if `from`
    is provided without `to`, meaning that the duration is in progress. Can be
    set to `false` to disable re-rendering.
  </PropertiesListItem>
  <PropertiesListItem name="locale" type="string">
    The locale used when formatting the duration. Defaults to the browser‚Äôs
    locale.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

#### FileSize [#primitives-FileSize]

Displays a formatted file size.

```tsx
<FileSize size={100000} />
```

Use with `attachment.size` to display a human-readable file size.

```tsx
import { FileSize } from "@liveblocks/react-ui/primitives";
import { CommentData } from "@liveblocks/client";

function MyComment({ comment }: { comment: CommentData }) {
  return (
    <div>
      {/* ... */}

      {comment.attachments.map((attachment) => (
        <div key={attachment.id}>
          {attachment.name}
          // +++
          <FileSize size={attachment.size} />
          // +++
        </div>
      ))}
    </div>
  );
}
```

<PropertiesList>
  <PropertiesListItem name="size" type="number" required>
    The file size to display.
  </PropertiesListItem>
  <PropertiesListItem
    name="children"
    type="function"
    detailedType="(size: number) => ReactNode"
  >
    A function to format the displayed file size. Defaults to a human-readable
    file size formatting function.
  </PropertiesListItem>
  <PropertiesListItem name="locale" type="string">
    The locale used when formatting the file size. Defaults to the browser‚Äôs
    locale.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

#### Emoji picker [#emoji-picker]

Using [Frimousse](https://frimousse.liveblocks.io) alongside
[`useAddReaction`](/docs/api-reference/liveblocks-react#useAddReaction), a
package originally designed for Comments, you can easily add an emoji picker to
your primitive Comments components.

```tsx
import { EmojiPicker } from "frimousse";
import { useAddReaction } from "@liveblocks/react/suspense";
import { CommentData } from "@liveblocks/client";

export function MyEmojiPicker({ comment }: { comment: CommentData }) {
  const addReaction = useAddReaction();

  return (
    <EmojiPicker.Root
      onEmojiSelect={({ emoji }) => {
        addReaction({
          threadId: comment.threadId,
          commentId: comment.id,
          emoji,
        });
      }}
    >
      <EmojiPicker.Search />
      <EmojiPicker.Viewport>
        <EmojiPicker.Loading>Loading‚Ä¶</EmojiPicker.Loading>
        <EmojiPicker.Empty>No emoji found.</EmojiPicker.Empty>
        <EmojiPicker.List />
      </EmojiPicker.Viewport>
    </EmojiPicker.Root>
  );
}
```

Find a full code snippet of this in our
[Comments primitives example](/examples/comments-primitives/nextjs-comments-primitives).

#### Emoji reactions [#emoji-reactions]

A list of clickable emoji reactions can be created using the
[`useAddReaction`](/docs/api-reference/liveblocks-react#useAddReaction),
[`useRemoveReaction`](/docs/api-reference/liveblocks-react#useRemoveReaction),
and [`useSelf`](/docs/api-reference/liveblocks-react#useSelf) hooks.

```tsx
import { CommentData } from "@liveblocks/client";
import {
  useAddReaction,
  useRemoveReaction,
  useSelf,
} from "@liveblocks/react/suspense";

export function MyEmojiReactions({ comment }: { comment: CommentData }) {
  const userId = useSelf().id;
  const addReaction = useAddReaction();
  const removeReaction = useRemoveReaction();

  return (
    <>
      {comment.reactions.map((reaction) => {
        const hasPicked = reaction.users.some((user) => user.id === userId);
        const reactionObject = {
          threadId: comment.threadId,
          commentId: comment.id,
          emoji: reaction.emoji,
        };

        return (
          <button
            key={reaction.emoji}
            onClick={() =>
              hasPicked
                ? removeReaction(reactionObject)
                : addReaction(reactionObject)
            }
            data-picked={hasPicked || undefined /* Use for CSS styling */}
          >
            {reaction.emoji} {reaction.users.length}
          </button>
        );
      })}
    </>
  );
}
```

### Hooks

#### useComposer

Returns states and methods related to the composer. Can only be used within the
[`Composer.Form`](#primitives-Composer.Form) primitive.
[All values listed below](#useComposer-values).

```tsx
import { useComposer } from "@liveblocks/react-ui/primitives";

const { isEmpty, attachments, submit /* ... */ } = useComposer();
```

##### Custom composer behavior

`useComposer` can be used in combination with
[`Composer` primitives](#primitives-Composer) to create a custom composer, and
control its behavior. For example, `createMention` allows you to create a button
which focuses the editor, adds `@`, and opens the mention suggestions dropdown.

```tsx
import { Composer, useComposer } from "@liveblocks/react-ui/primitives";
import { useCreateThread } from "@liveblocks/react/suspense";

function MyComposer() {
  const createThread = useCreateThread();

  return (
    <Composer.Form
      onComposerSubmit={({ body, attachments }) => {
        const thread = createThread({
          body,
          attachments,
          metadata: {},
        });
      }}
    >
      <Editor />
    </Composer.Form>
  );
}

function Editor() {
  // +++
  const { createMention } = useComposer();
  // +++

  return (
    <>
      <Composer.Editor components={/* Your custom component parts */} />
      // +++
      <button onClick={createMention}>Add mention</button>
      // +++
    </>
  );
}
```

##### Handle attachments

When using primitives,
[`Composer.AttachFiles`](#primitives-Composer.AttachFiles) and
[`Composer.AttachmentsDropArea`](#primitives-Composer.AttachmentsDropArea) add
attachments to the composer, but they‚Äôre not rendered without `useComposer`. The
`attachments` array can be used to render the current attachments, and
`removeAttachment` allows you to remove them.

```tsx
import { Composer, useComposer } from "@liveblocks/react-ui/primitives";
import { useCreateThread } from "@liveblocks/react/suspense";

function MyComposer() {
  const createThread = useCreateThread();

  return (
    <Composer.Form
      onComposerSubmit={({ body, attachments }) => {
        const thread = createThread({
          body,
          attachments,
          metadata: {},
        });
      }}
    >
      <Composer.Editor components={/* Your custom component parts */} />
      // +++
      <MyComposerAttachments />
      // +++
      <Composer.AttachFiles>Attach Files</Composer.AttachFiles>
      <Composer.Submit>Submit</Composer.Submit>
    </Composer.Form>
  );
}

function MyComposerAttachments() {
  // +++
  const { attachments, removeAttachment } = useComposer();
  // +++

  return (
    <div>
      // +++
      {attachments.map((attachment) => (
        <div key={attachment.id}>
          {attachment.name} ({attachment.status})
          <button onClick={() => removeAttachment(attachment.id)}>
            Remove
          </button>
        </div>
      ))}
      // +++
    </div>
  );
}
```

##### Values [#useComposer-values]

<PropertiesList>
  <PropertiesListItem name="isDisabled" type="boolean">
    Whether the composer is currently disabled.
  </PropertiesListItem>
  <PropertiesListItem name="isFocused" type="boolean">
    Whether the editor is currently focused.
  </PropertiesListItem>
  <PropertiesListItem name="isEmpty" type="boolean">
    Whether the editor is currently empty.
  </PropertiesListItem>
  <PropertiesListItem name="canSubmit" type="boolean">
    Whether the composer can currently be submitted.
  </PropertiesListItem>
  <PropertiesListItem name="submit" type="function" detailedType="() => void">
    Submit the editor programmatically.
  </PropertiesListItem>
  <PropertiesListItem name="clear" type="function" detailedType="() => void">
    Clear the editor programmatically.
  </PropertiesListItem>
  <PropertiesListItem name="select" type="function" detailedType="() => void">
    Select the editor programmatically.
  </PropertiesListItem>
  <PropertiesListItem name="focus" type="function" detailedType="() => void">
    Focus the editor programmatically.
  </PropertiesListItem>
  <PropertiesListItem name="blur" type="function" detailedType="() => void">
    Blur the editor programmatically.
  </PropertiesListItem>
  <PropertiesListItem name="marks" type="ComposerBodyMarks">
    Which text marks are currently active and which aren‚Äôt.
  </PropertiesListItem>
  <PropertiesListItem
    name="toggleMark"
    type="function"
    detailedType="(mark: ComposerBodyMark) => void"
  >
    Toggle a specific text mark.
  </PropertiesListItem>
  <PropertiesListItem
    name="createMention"
    type="function"
    detailedType="() => void"
  >
    Start creating a mention at the current selection.
  </PropertiesListItem>
  <PropertiesListItem
    name="insertText"
    type="function"
    detailedType="(text: string) => void"
  >
    Insert text at the current selection.
  </PropertiesListItem>
  <PropertiesListItem
    name="attachFiles"
    type="function"
    detailedType="() => void"
  >
    Open a file picker programmatically to create attachments.
  </PropertiesListItem>
  <PropertiesListItem name="attachments" type="ComposerAttachment[]">
    The composer‚Äôs current attachments.
  </PropertiesListItem>
  <PropertiesListItem
    name="removeAttachment"
    type="function"
    detailedType="(attachmentId: string) => void"
  >
    Remove an attachment by its ID.
  </PropertiesListItem>
</PropertiesList>

#### Other hooks

Other Comments hooks are part of
[`@liveblocks/react`](/docs/api-reference/liveblocks-react), you can find them
on the
[React API reference page](/docs/api-reference/liveblocks-react#Comments).

- [`useThreads`](/docs/api-reference/liveblocks-react#useThreads)
- [`useThreadSubscription`](/docs/api-reference/liveblocks-react#useThreadSubscription)
- [`useCreateThread`](/docs/api-reference/liveblocks-react#useCreateThread)
- [`useDeleteThread`](/docs/api-reference/liveblocks-react#useDeleteThread)
- [`useEditThreadMetadata`](/docs/api-reference/liveblocks-react#useEditThreadMetadata)
- [`useMarkThreadAsResolved`](/docs/api-reference/liveblocks-react#useMarkThreadAsResolved)
- [`useMarkThreadAsUnresolved`](/docs/api-reference/liveblocks-react#useMarkThreadAsUnresolved)
- [`useMarkThreadAsRead`](/docs/api-reference/liveblocks-react#useMarkThreadAsRead)
- [`useCreateComment`](/docs/api-reference/liveblocks-react#useCreateComment)
- [`useEditComment`](/docs/api-reference/liveblocks-react#useEditComment)
- [`useDeleteComment`](/docs/api-reference/liveblocks-react#useDeleteComment)
- [`useAddReaction`](/docs/api-reference/liveblocks-react#useAddReaction)
- [`useRemoveReaction`](/docs/api-reference/liveblocks-react#useRemoveReaction)
- [`useAttachmentUrl`](/docs/api-reference/liveblocks-react#useAttachmentUrl)

## Notifications

### Default components

#### InboxNotification

Displays a single inbox notification.

```tsx
<InboxNotification inboxNotification={inboxNotification} />
```

<Figure>
  <Image
    src="/assets/notifications/inbox-notification.png"
    alt="InboxNotification"
    width={768}
    height={446}
  />
</Figure>

Map through `inboxNotifications` with
[`useInboxNotifications`](/docs/api-reference/liveblocks-react#useInboxNotifications)
to render a list of the room‚Äôs notifications.

```tsx highlight="10-13"
import { InboxNotification } from "@liveblocks/react-ui";
import { useInboxNotifications } from "@liveblocks/react/suspense";

function Component() {
  const { inboxNotifications } = useInboxNotifications();

  return (
    <>
      {inboxNotifications.map((inboxNotification) => (
        <InboxNotification
          key={inboxNotification.id}
          inboxNotification={inboxNotification}
        />
      ))}
    </>
  );
}
```

##### Rendering notification kinds differently

Different `kinds` of notifications are available, for example `thread` which is
triggered when using Comments, or `$myCustomNotification` which would be a
custom notification you‚Äôve triggered manually. You can choose to render each
notification differently.

```tsx highlight="4-14"
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    thread: (props) => (
      <InboxNotification.Thread {...props} showRoomName={false} />
    ),
    $myCustomNotification: (props) => (
      <InboxNotification.Custom
        {...props}
        title="New notification"
        aside={<InboxNotification.Icon>‚ùï</InboxNotification.Icon>}
      >
        My custom notification
      </InboxNotification.Custom>
    ),
  }}
/>
```

Adding these two properties to `kinds` will overwrite the default component
that‚Äôs displayed for those two notification types. Using
[`InboxNotification.Thread`](/docs/api-reference/liveblocks-react-ui#InboxNotification.Thread)
and
[`InboxNotification.Custom`](/docs/api-reference/liveblocks-react-ui#InboxNotification.Custom)
in this way allow you to easily create components that fit into the existing
design system, whilst still adding lots of customization. However, it‚Äôs also
valid to render any custom JSX.

```tsx highlight="3-5"
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    $myCustomNotification: (props) => <div>New notification</div>,
  }}
/>
```

##### Typing custom notifications

To type custom notifications, edit the `ActivitiesData` type in your config
file.

```ts file="liveblocks.config.ts" highlight="4-10"
declare global {
  interface Liveblocks {
    // Custom activities data for custom notification kinds
    ActivitiesData: {
      // Example, a custom $alert kind
      $alert: {
        title: string;
        message: string;
      };
    };

    // Other kinds
    // ...
  }
}
```

Your activities data is now correctly typed in inline functions.

```tsx highlight="5-6"
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    $alert: (props) => {
      // `title` and `message` are correctly typed, as defined in your config
      const { title, message } = props.inboxNotification.activities[0].data;

      return (
        <InboxNotification.Custom
          {...props}
          title={title}
          aside={<InboxNotification.Icon>‚ùó</InboxNotification.Icon>}
        >
          {message}
        </InboxNotification.Custom>
      );
    },
  }}
/>
```

If you‚Äôd like to create a typed function elsewhere, you can use
`InboxNotificationCustomProps` with a generic. In the example below we‚Äôre using
the `$alert` notification kind as a generic,
`InboxNotificationCustomKindProps<"$alert">`.

```tsx highlight="6-8,25"
import {
  InboxNotification,
  InboxNotificationCustomKindProps,
} from "@liveblocks/react-ui";

function AlertNotification(props: InboxNotificationCustomKindProps<"$alert">) {
  // `title` and `message` are correctly typed, as defined in your config
  const { title, message } = props.inboxNotification.activities[0].data;

  return (
    <InboxNotification.Custom
      {...props}
      title={title}
      aside={<InboxNotification.Icon>‚ùó</InboxNotification.Icon>}
    >
      {message}
    </InboxNotification.Custom>
  );
}

function Notification({ inboxNotification }) {
  return (
    <InboxNotification
      inboxNotification={inboxNotification}
      kinds={{ $alert: AlertNotification }}
    />
  );
}
```

##### Props [#InboxNotification-props]

<PropertiesList>
  <PropertiesListItem
    name="inboxNotification"
    type="InboxNotificationData"
    required
  >
    The inbox notification to display.
  </PropertiesListItem>
  <PropertiesListItem name="href" type="string">
    The URL which the inbox notification links to.
  </PropertiesListItem>
  <PropertiesListItem name="showActions" type='boolean | "hover"'>
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="kinds" type="Partial<InboxNotificationKinds>">
    Override specific kinds of inbox notifications.
  </PropertiesListItem>
  <PropertiesListItem
    name="overrides"
    type="Partial<GlobalOverrides & InboxNotificationOverrides & CommentOverrides>"
  >
    Override the component‚Äôs strings.
  </PropertiesListItem>
  <PropertiesListItem name="components" type="Partial<GlobalComponents>">
    Override the component‚Äôs components.
  </PropertiesListItem>
</PropertiesList>

###### kinds [#InboxNotification-kinds]

Override specific kinds of inbox notifications.

<PropertiesList>
  <PropertiesListItem
    name="thread"
    type="ComponentType<InboxNotificationThreadKindProps>"
  >
    The component used to display thread notifications. Defaults to
    `InboxNotification.Thread`.
  </PropertiesListItem>
  <PropertiesListItem
    name="textMention"
    type="ComponentType<InboxNotificationTextMentionKindProps>"
  >
    The component used to display text mention notifications. Defaults to
    `InboxNotification.TextMention`.
  </PropertiesListItem>
  <PropertiesListItem
    name="$${string}"
    type="ComponentType<InboxNotificationCustomKindProps>"
  >
    The component used to display a custom notification kind. Custom
    notification kinds must start with a `$`.
  </PropertiesListItem>
</PropertiesList>

###### InboxNotification.Thread [#InboxNotification.Thread]

Displays a thread inbox notification kind.

```tsx
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    thread: (props) => (
      <InboxNotification.Thread {...props} showRoomName={false} />
    ),
  }}
/>
```

<PropertiesList>
  <PropertiesListItem
    name="inboxNotification"
    type="InboxNotificationThreadData"
    required
  >
    The inbox notification to display.
  </PropertiesListItem>
  <PropertiesListItem name="showActions" type='boolean | "hover"'>
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="showRoomName" type="boolean" defaultValue="true">
    Whether to show the room name in the title.
  </PropertiesListItem>
  <PropertiesListItem name="showReactions" type="boolean" defaultValue="true">
    Whether to show reactions.
  </PropertiesListItem>
  <PropertiesListItem name="showAttachments" type="boolean" defaultValue="true">
    Whether to show attachments.
  </PropertiesListItem>
</PropertiesList>

###### InboxNotification.TextMention [#InboxNotification.TextMention]

Displays a text mention inbox notification kind.

```tsx
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    textMention: (props) => (
      <InboxNotification.TextMention {...props} showRoomName={false} />
    ),
  }}
/>
```

<PropertiesList>
  <PropertiesListItem
    name="inboxNotification"
    type="InboxNotificationTextMentionData"
    required
  >
    The inbox notification to display.
  </PropertiesListItem>
  <PropertiesListItem name="showActions" type='boolean | "hover"'>
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="showRoomName" type="boolean" defaultValue="true">
    Whether to show the room name in the title.
  </PropertiesListItem>
</PropertiesList>

###### InboxNotification.Custom [#InboxNotification.Custom]

Displays a custom notification kind.

```tsx
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    $myCustomNotificationKind: (props) => {
      const activityData = props.inboxNotification.activities[0].data;

      return (
        <InboxNotification.Custom
          title={
            <>
              User <strong>{activityData.file}</strong>
            </>
          }
          aside={<InboxNotification.Icon>‚ùå</InboxNotification.Icon>}
          {...props}
        >
          {activityData.errorDescription}
        </InboxNotification.Custom>
      );
    },
  }}
/>
```

<PropertiesList>
  <PropertiesListItem
    name="inboxNotification"
    type="InboxNotificationCustomData"
    required
  >
    The inbox notification to display.
  </PropertiesListItem>
  <PropertiesListItem name="title" type="ReactNode" required>
    The inbox notification‚Äôs title.
  </PropertiesListItem>
  <PropertiesListItem name="children" type="ReactNode" required>
    The inbox notification‚Äôs content.
  </PropertiesListItem>
  <PropertiesListItem name="showActions" type='boolean | "hover"'>
    How to show or hide the actions.
  </PropertiesListItem>
  <PropertiesListItem name="aside" type="ReactNode">
    The inbox notification‚Äôs aside content. Can be combined with{" "}
    <code>InboxNotification.Icon</code> or <code>InboxNotification.Avatar</code>{" "}
    to easily follow default styles.
  </PropertiesListItem>
  <PropertiesListItem name="asChild" type="boolean" defaultValue="false">
    Replace the rendered element by the one passed as a child.
  </PropertiesListItem>
</PropertiesList>

###### InboxNotification.Inspector [#InboxNotification.Inspector]

Displays the inbox notification‚Äôs data in a JSON code snippet. Useful when
debugging notifications in your app.

```tsx
<InboxNotification
  inboxNotification={inboxNotification}
  kinds={{
    $myCustomNotificationKind: InboxNotification.Inspector,
  }}
/>
```

<PropertiesList>
  <PropertiesListItem
    name="inboxNotification"
    type="InboxNotificationData"
    required
  >
    The inbox notification to display.
  </PropertiesListItem>
  <PropertiesListItem name="showActions" type='boolean | "hover"'>
    How to show or hide the actions.
  </PropertiesListItem>
</PropertiesList>

#### InboxNotificationList

Displays inbox notifications as a list. Each
[`InboxNotification`](#InboxNotification) component will be wrapped in a `li`
element.

```tsx
<InboxNotificationList>
  <InboxNotification />
  <InboxNotification />
  <InboxNotification />
</InboxNotificationList>
```

<Figure>
  <Image
    src="/assets/notifications/inbox-notification-list.png"
    alt="InboxNotificationList"
    width={768}
    height={446}
  />
</Figure>

##### Props [#InboxNotificationList-props]

<PropertiesList>
  <PropertiesListItem name="children" type="ReactNode">
    The inbox notifications to display.
  </PropertiesListItem>
</PropertiesList>

### Hooks [#Notification-hooks]

All hooks for Notifications are in
[`@liveblocks/react`](/docs/api-reference/liveblocks-react#Notifications).

## Version History

<Banner title="Contact support for access">

Version History is an add-on feature, available by contacting support. Please [contact us](https://liveblocks.io/contact/sales) and we'd love to help you get started.

</Banner>

When enabled, version history will automatically create versions of your
[Lexical](https://liveblocks.io/docs/api-reference/liveblocks-react-lexical) or
[Yjs](/docs/api-reference/liveblocks-yjs) document and allow you to restore to
specific versions. These components aid in displaying a list of those versions.

### Default components

### HistoryVersionSummary

Displays a version summary which includes the author and date.

```tsx
<HistoryVersionSummary
  onClick={() => {
    setSelectedVersionId(version.id);
  }}
  version={version}
  selected={version.id === selectedVersionId}
/>
```

##### Props [#HistoryVersionSummary-props]

<PropertiesList>
  <PropertiesListItem name="onClick" type="() => void">
    The function to call when the version summary is clicked.
  </PropertiesListItem>
  <PropertiesListItem name="version" type="Version">
    The version object containing information about the specific version.
  </PropertiesListItem>
  <PropertiesListItem name="selected" type="boolean">
    Whether this version is currently selected.
  </PropertiesListItem>
</PropertiesList>

#### HistoryVersionSummaryList

Displays a list of version summaries for a document‚Äôs history including authors
and dates.

```tsx
<HistoryVersionSummaryList>
  {versions?.map((version) => (
    <HistoryVersionSummary
      onClick={() => {
        setSelectedVersionId(version.id);
      }}
      key={version.id}
      version={version}
      selected={version.id === selectedVersionId}
    />
  ))}
</HistoryVersionSummaryList>
```

##### Props [#HistoryVersionSummaryList-props]

<PropertiesList>
  <PropertiesListItem name="children" type="ReactNode">
    The version summaries to display, typically an array of
    HistoryVersionSummary components.
  </PropertiesListItem>
</PropertiesList>

## Utilities

### Components [#utilities-components]

#### Icon

Most icons used in the default components can be exported via `<Icon.* />`.
They‚Äôre stroke-based and designed for use at 20√ó20 pixels.

```tsx
import { Icon } from "@liveblocks/react-ui";

<Icon.QuestionMark />
<Icon.Mention  />
```

Find a full list of available icons in
[our GitHub repo](https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/src/icon.ts).

#### LiveblocksUiConfig

Set configuration options for all `@liveblocks/react-ui` components, such as
[overrides](#overrides).

```tsx
<LiveblocksUiConfig overrides={{ locale: "fr", USER_UNKNOWN: "Anonyme" }} />
```

##### Props [#LiveblocksUiConfig-props]

<PropertiesList>
  <PropertiesListItem name="overrides" type="Partial<Overrides>">
    Override the components‚Äô strings.
  </PropertiesListItem>
  <PropertiesListItem name="components" type="Partial<Components>">
    Override the components‚Äô components.
  </PropertiesListItem>
  <PropertiesListItem
    name="portalContainer"
    type="HTMLElement"
    defaultValue="document.body"
  >
    The container to render the portal into.
  </PropertiesListItem>
  <PropertiesListItem
    name="preventUnsavedComposerChanges"
    type="boolean"
    defaultValue="true"
  >
    When `preventUnsavedChanges` is set on your Liveblocks client (or set on
    `LiveblocksProvider`), then closing a browser tab will be prevented when
    there are unsaved changes. By default, that will include draft texts or
    attachments that are (being) uploaded via comments/threads composers, but
    not submitted yet. If you want to prevent unsaved changes with Liveblocks,
    but not for composers, you can opt-out by setting this option to `false`.
  </PropertiesListItem>
  <PropertiesListItem
    name="emojibaseUrl"
    type="string"
    defaultValue={`"https://cdn.jsdelivr.net/npm/emojibase-data"`}
  >
    Use this option to host your own emoji data.

    The Liveblocks emoji picker (visible when adding reactions in `Comment`) is built with
    [Frimousse](https://github.com/liveblocks/frimousse), which fetches its data
    from [Emojibase](https://emojibase.dev/docs/datasets/).

    This option allows you to change the base URL of where the
    [`emojibase-data`](https://www.npmjs.com/package/emojibase-data) files
    should be fetched from, used as follows: `${emojibaseUrl}/${locale}/${file}.json`.
    (e.g. `${emojibaseUrl}/en/data.json`).

  </PropertiesListItem>
</PropertiesList>

### Hooks [#Version-History-hooks]

All hooks for Version History are in
[`@liveblocks/react`](/docs/api-reference/liveblocks-react#Version-History).

## Styling and customization

### Default styles

The default components come with default styles. These styles can be imported
into the root of your app or directly into a CSS file with `@import`.

```tsx
import "@liveblocks/react-ui/styles.css";
```

### Dark mode

You can also import default dark mode styling. There are two versions to choose
from, the first uses the
[system theme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme).

```tsx
// Dark mode using the system theme with `prefers-color-scheme`
import "@liveblocks/react-ui/styles/dark/media-query.css";
```

The second uses the `dark` class name, and two commonly used data attributes.

```tsx
// Dark mode using `className="dark"`, `data-theme="dark"`, or `data-dark="true"`
import "@liveblocks/react-ui/styles/dark/attributes.css";
```

### CSS variables

The default components are built around a set of customizable CSS variables. Set
these variables within `.lb-root` to globally style your components.

```css
/* Styles all default Comments components */
.lb-root {
  --lb-accent: purple;
  --lb-spacing: 1em;
  --lb-radius: 0;
}
```

<PropertiesList>
  <PropertiesListItem name="--lb-radius" defaultValue="0.5em">
    The border radius scale. `em` values recommended.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-spacing" defaultValue="1em">
    The spacing scale. `em` values recommended.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-accent" defaultValue="#1177ff">
    The accent color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-accent-foreground" defaultValue="#ffffff">
    The foreground color used over the accent color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-destructive" defaultValue="#ff4455">
    The destructive color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-destructive-foreground" defaultValue="#ffffff">
    The foreground color used over the destructive color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-background" defaultValue="#ffffff">
    The main background color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-foreground" defaultValue="#111111">
    The main foreground color.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-line-height" defaultValue="1.5">
    The line height of main elements (e.g. comment bodies).
  </PropertiesListItem>
  <PropertiesListItem name="--lb-icon-size" defaultValue="20px">
    The size of icons.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-icon-weight" defaultValue="1.5px">
    The stroke weight of icons.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-avatar-radius" defaultValue="50%">
    The border radius used for avatars.
  </PropertiesListItem>
  <PropertiesListItem
    name="--lb-button-radius"
    defaultValue="calc(0.75 * var(--lb-radius))"
  >
    The border radius used for buttons.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-transition-duration" defaultValue="0.1s">
    The duration used for transitioned elements.
  </PropertiesListItem>
  <PropertiesListItem
    name="--lb-transition-easing"
    defaultValue="cubic-bezier(0.4, 0, 0.2, 1)"
  >
    The easing function used for transitioned elements.
  </PropertiesListItem>
  <PropertiesListItem
    name="--lb-elevation-shadow"
    defaultValue="0 0 0 1px rgb(0 0 0 / 4%), 0 2px 6px rgb(0 0 0 / 8%),  0 8px 26px rgb(0 0 0 / 12%)"
  >
    The box shadow added to elevated elements.
  </PropertiesListItem>
  <PropertiesListItem
    name="--lb-elevation-shadow-moderate"
    defaultValue="  0 0 0 1px rgb(0 0 0 / 4%), 0 2px 6px rgb(0 0 0 / 6%), 0 8px 26px rgb(0 0 0 / 8%)"
  >
    The box shadow added to moderately elevated elements.
  </PropertiesListItem>
  <PropertiesListItem
    name="--lb-tooltip-shadow"
    defaultValue="0 2px 4px rgb(0 0 0 / 8%), 0 4px 12px rgb(0 0 0 / 12%)"
  >
    The box shadow added to tooltips.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-accent-contrast" defaultValue="8%">
    Affects the lightness of accent colors. `%` value required.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-destructive-contrast" defaultValue="8%">
    Affects the lightness of destructive colors. `%` value required.
  </PropertiesListItem>
  <PropertiesListItem name="--lb-foreground-contrast" defaultValue="6%">
    Affects the lightness of foreground colors. `%` value required.
  </PropertiesListItem>
</PropertiesList>

{/* TODO: Explain automatic color scales (with a palette-type visual) */}

### Class names

Each default component has a set of predefined class names, which can be helpful
for custom styling, for example.

```css
.lb-thread {
  /* Customise thread */
}

.lb-composer {
  /* Customise composer */
}
```

Additionally, some elements also have data attributes to provide contextual
information, for example:

```css
.lb-button[data-variant="primary"] {
  /* Customise primary buttons */
}

.lb-avatar[data-loading] {
  /* Customise avatar loading state */
}
```

<Banner title="Internal classes" type="warning">

Classes containing colons `:` are internal and may change over time.

</Banner>

### Portaled elements

Floating elements within the default components (e.g. tooltips, dropdowns, etc)
are portaled to the end of the document to avoid `z-index` conflicts and
`overflow` issues.

When portaled, those elements are also wrapped in a container to handle their
positioning. These containers don‚Äôt have any specific class names or data
attributes so they shouldn‚Äôt be targeted or styled directly, but they will
mirror whichever `z-index` value is set on their inner element (which would be
`auto` by default). So if you need to set a specific `z-index` value on floating
elements, you should set it on the floating elements themselves directly,
ignoring their containers. You can either target specific floating elements
(e.g. `.lb-tooltip`, `.lb-dropdown`, etc) or all of them at once via the
`.lb-portal` class name.

```css
/* Target all floating elements */
.lb-portal {
  z-index: 5;
}

/* Target a specific floating element */
.lb-tooltip {
  z-index: 10;
}
```

### Overrides

Overrides can be used to customize components‚Äô strings and localization-related
properties, such as locale and reading direction.

They can be set globally for all components using `LiveblocksUiConfig`:

```tsx
import { LiveblocksUiConfig } from "@liveblocks/react-ui";

export function App() {
  return (
    <LiveblocksUiConfig
      overrides={{ locale: "fr", USER_UNKNOWN: "Anonyme" /* ... */ }}
    >
      {/* ... */}
    </LiveblocksUiConfig>
  );
}
```

Overrides can also be set per-component, and these settings will take precedence
over global settings. This is particularly useful in certain contexts, for
example when you‚Äôre using a `<Composer />` component for creating replies to
threads:

```tsx
<Composer
  overrides={{
    COMPOSER_PLACEHOLDER: "Reply to thread‚Ä¶",
    COMPOSER_SEND: "Reply",
  }}
/>
```
