#!/bin/sh
set -eu

ROOT="$(git root)"

while true; do
    clear
    set +e
    "$ROOT/bin/build-parser" \
      && ts-node-esm "$ROOT/bin/generate-ast.ts" \
      && jest
    set -e
    echo "Press Enter to re-run the tests"
    read answer
    if [ "$answer" = "q" ]; then
        break
    fi
done
